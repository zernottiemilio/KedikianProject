<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Gestión de Maquinaria y Áridos</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.3.0/chart.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.3/leaflet.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.3/leaflet.css">
  <style>
    :root {
      --primary: #1e88e5;
      --secondary: #6c757d;
      --success: #28a745;
      --warning: #ffc107;
      --danger: #dc3545;
      --light: #f8f9fa;
      --dark: #343a40;
      --gray: #adb5bd;
      --bg-light: #f8f9fa;
      --bg-dark: #212529;
      --sidebar-width: 250px;
      --header-height: 60px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', 'Roboto', sans-serif;
    }

    body {
      background-color: var(--bg-light);
      color: var(--dark);
      transition: background-color 0.3s, color 0.3s;
    }

    body.dark-mode {
      background-color: var(--bg-dark);
      color: var(--light);
    }

    .container {
      display: grid;
      grid-template-columns: var(--sidebar-width) 1fr;
      grid-template-rows: var(--header-height) 1fr;
      grid-template-areas:
        "sidebar header"
        "sidebar main";
      height: 100vh;
    }

    /* Header */
    .header {
      grid-area: header;
      background-color: white;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 100;
    }

    .dark-mode .header {
      background-color: #2d3748;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    }

    .search-container {
      flex: 1;
      max-width: 500px;
      margin: 0 20px;
    }

    .search-bar {
      width: 100%;
      padding: 8px 15px;
      border-radius: 20px;
      border: 1px solid #ddd;
      outline: none;
      font-size: 14px;
      background-color: #f5f5f5;
    }

    .dark-mode .search-bar {
      background-color: #4a5568;
      border-color: #2d3748;
      color: white;
    }

    .action-buttons {
      display: flex;
      gap: 10px;
    }

    .btn {
      padding: 8px 15px;
      border-radius: 5px;
      border: none;
      cursor: pointer;
      font-weight: 500;
      transition: background-color 0.3s;
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 13px;
    }

    .btn-primary {
      background-color: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background-color: #1565c0;
    }

    .btn-secondary {
      background-color: var(--secondary);
      color: white;
    }

    .btn-secondary:hover {
      background-color: #5a6268;
    }

    .btn-success {
      background-color: var(--success);
      color: white;
    }

    .btn-success:hover {
      background-color: #218838;
    }

    .btn-warning {
      background-color: var(--warning);
      color: #212529;
    }

    .btn-warning:hover {
      background-color: #e0a800;
    }

    .notifications {
      position: relative;
      margin-left: 15px;
    }

    .notification-icon {
      font-size: 20px;
      cursor: pointer;
      color: var(--dark);
    }

    .dark-mode .notification-icon {
      color: var(--light);
    }

    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: var(--danger);
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 11px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .user-profile {
      display: flex;
      align-items: center;
      margin-left: 20px;
      cursor: pointer;
    }

    .avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      background-color: #ddd;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-right: 10px;
      font-weight: bold;
      color: #666;
    }

    .dark-mode .avatar {
      background-color: #4a5568;
      color: #e2e8f0;
    }

    /* Sidebar */
    .sidebar {
      grid-area: sidebar;
      background-color: #2c3e50;
      color: white;
      padding: 20px 0;
      transition: transform 0.3s;
      z-index: 101;
    }

    .logo {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 20px 20px;
      margin-bottom: 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .logo img {
      width: 40px;
      height: 40px;
      margin-right: 10px;
    }

    .logo-text {
      font-size: 18px;
      font-weight: bold;
    }

    .nav-item {
      padding: 12px 20px;
      display: flex;
      align-items: center;
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      transition: background-color 0.3s;
      cursor: pointer;
    }

    .nav-item:hover,
    .nav-item.active {
      background-color: rgba(255, 255, 255, 0.1);
      color: white;
    }

    .nav-item i {
      margin-right: 10px;
      width: 20px;
      text-align: center;
    }

    .nav-section {
      margin-top: 30px;
      padding: 0 20px 10px;
      font-size: 12px;
      text-transform: uppercase;
      color: rgba(255, 255, 255, 0.5);
      letter-spacing: 1px;
    }

    /* Main Content */
    .main-content {
      grid-area: main;
      padding: 20px;
      overflow-y: auto;
    }

    .dashboard-header {
      margin-bottom: 20px;
    }

    .page-title {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 5px;
    }

    .breadcrumb {
      font-size: 14px;
      color: var(--secondary);
    }

    .dark-mode .breadcrumb {
      color: #a0aec0;
    }

    .kpi-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .kpi-card {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .kpi-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .dark-mode .kpi-card {
      background-color: #2d3748;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    .kpi-title {
      font-size: 14px;
      color: var(--secondary);
      margin-bottom: 10px;
    }

    .dark-mode .kpi-title {
      color: #a0aec0;
    }

    .kpi-value {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .kpi-change {
      display: flex;
      align-items: center;
      font-size: 12px;
      color: var(--success);
    }

    .kpi-change.negative {
      color: var(--danger);
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
    }

    .card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
      overflow: hidden;
    }

    .dark-mode .card {
      background-color: #2d3748;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    .card-header {
      padding: 15px 20px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .dark-mode .card-header {
      border-bottom-color: #4a5568;
    }

    .card-title {
      font-size: 16px;
      font-weight: 600;
    }

    .card-actions {
      display: flex;
      gap: 10px;
    }

    .card-body {
      padding: 20px;
    }

    .map-container {
      height: 300px;
      width: 100%;
      background-color: #f5f5f5;
      border-radius: 5px;
    }

    .dark-mode .map-container {
      background-color: #4a5568;
    }

    .machine-list {
      margin-top: 20px;
    }

    .machine-item {
      display: flex;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid #eee;
    }

    .dark-mode .machine-item {
      border-bottom-color: #4a5568;
    }

    .machine-status {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .status-active {
      background-color: var(--success);
    }

    .status-maintenance {
      background-color: var(--warning);
    }

    .status-inactive {
      background-color: var(--gray);
    }

    .status-error {
      background-color: var(--danger);
    }

    .machine-info {
      flex: 1;
    }

    .machine-name {
      font-weight: 500;
      margin-bottom: 5px;
    }

    .machine-details {
      font-size: 12px;
      color: var(--secondary);
    }

    .dark-mode .machine-details {
      color: #a0aec0;
    }

    .machine-hours {
      background-color: #f5f5f5;
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 12px;
      font-weight: 500;
    }

    .dark-mode .machine-hours {
      background-color: #4a5568;
    }

    .chart-container {
      height: 250px;
      width: 100%;
      margin-top: 10px;
    }

    .inventory-bar {
      display: flex;
      height: 20px;
      background-color: #f5f5f5;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 5px;
    }

    .dark-mode .inventory-bar {
      background-color: #4a5568;
    }

    .inventory-fill {
      height: 100%;
      background-color: var(--primary);
    }

    .inventory-low {
      background-color: var(--warning);
    }

    .inventory-critical {
      background-color: var(--danger);
    }

    .inventory-item {
      margin-bottom: 15px;
    }

    .inventory-info {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      margin-bottom: 5px;
    }

    .inventory-name {
      font-weight: 500;
    }

    .inventory-value {
      color: var(--secondary);
    }

    .dark-mode .inventory-value {
      color: #a0aec0;
    }

    .project-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .project-card {
      background-color: #f8f9fa;
      border-radius: 5px;
      padding: 15px;
      transition: background-color 0.3s;
    }

    .dark-mode .project-card {
      background-color: #4a5568;
    }

    .project-card:hover {
      background-color: #e9ecef;
    }

    .dark-mode .project-card:hover {
      background-color: #2d3748;
    }

    .project-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .project-title {
      font-weight: 600;
    }

    .project-status {
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 12px;
      background-color: var(--light);
    }

    .dark-mode .project-status {
      background-color: #4a5568;
    }

    .status-progress {
      background-color: #e3f2fd;
      color: var(--primary);
    }

    .dark-mode .status-progress {
      background-color: rgba(30, 136, 229, 0.2);
    }

    .project-content {
      font-size: 13px;
      color: var(--secondary);
      margin-bottom: 10px;
    }

    .dark-mode .project-content {
      color: #a0aec0;
    }

    .project-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    }

    .project-machines {
      display: flex;
      gap: 5px;
    }

    .machine-badge {
      width: 25px;
      height: 25px;
      border-radius: 50%;
      background-color: var(--primary);
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 10px;
    }

    .project-date {
      color: var(--secondary);
    }

    .dark-mode .project-date {
      color: #a0aec0;
    }

    .calendar-event {
      display: flex;
      padding: 10px 0;
      border-bottom: 1px solid #eee;
    }

    .dark-mode .calendar-event {
      border-bottom-color: #4a5568;
    }

    .event-date {
      width: 50px;
      height: 50px;
      background-color: #f5f5f5;
      border-radius: 5px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      margin-right: 15px;
    }

    .dark-mode .event-date {
      background-color: #4a5568;
    }

    .event-day {
      font-size: 18px;
      font-weight: 700;
    }

    .event-month {
      font-size: 12px;
      text-transform: uppercase;
      color: var(--secondary);
    }

    .dark-mode .event-month {
      color: #a0aec0;
    }

    .event-content {
      flex: 1;
    }

    .event-title {
      font-weight: 500;
      margin-bottom: 5px;
    }

    .event-details {
      font-size: 12px;
      color: var(--secondary);
    }

    .dark-mode .event-details {
      color: #a0aec0;
    }

    .invoice-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .invoice-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: #f8f9fa;
      border-radius: 5px;
      transition: background-color 0.3s;
    }

    .dark-mode .invoice-item {
      background-color: #4a5568;
    }

    .invoice-item:hover {
      background-color: #e9ecef;
    }

    .dark-mode .invoice-item:hover {
      background-color: #2d3748;
    }

    .invoice-info {
      display: flex;
      flex-direction: column;
    }

    .invoice-id {
      font-weight: 500;
      margin-bottom: 3px;
    }

    .invoice-client {
      font-size: 12px;
      color: var(--secondary);
    }

    .dark-mode .invoice-client {
      color: #a0aec0;
    }

    .invoice-amount {
      font-weight: 600;
    }

    .invoice-date {
      font-size: 12px;
      color: var(--secondary);
      text-align: right;
    }

    .dark-mode .invoice-date {
      color: #a0aec0;
    }

    .invoice-overdue {
      color: var(--danger);
    }

    .filter-container {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .filter-select {
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ddd;
      background-color: white;
      font-size: 14px;
      outline: none;
    }

    .dark-mode .filter-select {
      background-color: #4a5568;
      border-color: #2d3748;
      color: white;
    }

    .view-all {
      color: var(--primary);
      font-size: 14px;
      cursor: pointer;
      text-decoration: none;
    }

    .view-all:hover {
      text-decoration: underline;
    }

    /* Utilities */
    .text-success {
      color: var(--success);
    }

    .text-warning {
      color: var(--warning);
    }

    .text-danger {
      color: var(--danger);
    }

    .text-info {
      color: var(--primary);
    }

    .ml-auto {
      margin-left: auto;
    }

    /* Toggle for dark/light mode */
    .theme-toggle {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 20px;
      color: var(--dark);
      margin-left: 10px;
    }

    .dark-mode .theme-toggle {
      color: var(--light);
    }

    /* Responsive */
    @media (max-width: 992px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 768px) {
      .container {
        grid-template-columns: 1fr;
        grid-template-areas:
          "header"
          "main";
      }

      .sidebar {
        position: fixed;
        left: -250px;
        top: 0;
        bottom: 0;
        width: var(--sidebar-width);
      }

      .sidebar.show {
        transform: translateX(250px);
      }

      .menu-toggle {
        display: block;
      }

      .kpi-container {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 576px) {
      .kpi-container {
        grid-template-columns: 1fr;
      }

      .action-buttons {
        display: none;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="logo">
        <div
          style="width: 40px; height: 40px; background-color: #3498db; border-radius: 8px; display: flex; justify-content: center; align-items: center; margin-right: 10px;">
          <i class="fas fa-truck-monster" style="color: white; font-size: 22px;"></i>
        </div>
        <div class="logo-text">KEDIKIAN</div>
      </div>

      <a href="#" class="nav-item active">
        <i class="fas fa-tachometer-alt"></i> Dashboard
      </a>
      <a href="#" class="nav-item">
        <i class="fas fa-truck-monster"></i> Maquinaria
      </a>
      <a href="#" class="nav-item">
        <i class="fas fa-cubes"></i> Áridos
      </a>
      <a href="#" class="nav-item">
        <i class="fas fa-file-invoice-dollar"></i> Facturación
      </a>
      <a href="#" class="nav-item">
        <i class="fas fa-project-diagram"></i> Proyectos
      </a>
      <a href="#" class="nav-item">
        <i class="fas fa-users"></i> Clientes
      </a>
      <a href="#" class="nav-item">
        <i class="fas fa-chart-line"></i> Informes
      </a>

      <div class="nav-section">Configuración</div>
      <a href="#" class="nav-item">
        <i class="fas fa-cog"></i> Ajustes
      </a>
      <a href="#" class="nav-item">
        <i class="fas fa-user-cog"></i> Mi Cuenta
      </a>
      <a href="#" class="nav-item">
        <i class="fas fa-question-circle"></i> Ayuda
      </a>
      <a href="#" class="nav-item">
        <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
      </a>
    </div>

    <!-- Header -->
    <div class="header">
      <div class="menu-toggle">
        <i class="fas fa-bars"></i>
      </div>

      <div class="search-container">
        <input type="text" class="search-bar" placeholder="Buscar clientes, máquinas, proyectos...">
      </div>

      <div class="action-buttons">
        <button class="btn btn-primary"><i class="fas fa-truck-monster"></i> Nueva Operación</button>
        <button class="btn btn-primary"><i class="fas fa-cubes"></i> Venta de Áridos</button>
        <button class="btn btn-success"><i class="fas fa-file-invoice"></i> Generar Factura</button>
        <button class="btn btn-warning"><i class="fas fa-money-bill-wave"></i> Registrar Pago</button>
      </div>

      <div class="notifications">
        <i class="fas fa-bell notification-icon"></i>
        <div class="notification-badge">4</div>
      </div>

      <button class="theme-toggle" id="theme-toggle">
        <i class="fas fa-moon"></i>
      </button>

      <div class="user-profile">
        <div class="avatar">AD</div>
        <div class="user-info">
          <div>Admin</div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="dashboard-header">
        <h1 class="page-title">Dashboard</h1>
        <div class="breadcrumb">Inicio > Dashboard</div>
      </div>

      <!-- KPI Section -->
      <div class="kpi-container">
        <div class="kpi-card">
          <div class="kpi-title">Horas Facturadas (Mes)</div>
          <div class="kpi-value">1,245</div>
          <div class="kpi-change">
            <i class="fas fa-arrow-up"></i> 12% vs. mes anterior
          </div>
        </div>

        <div class="kpi-card">
          <div class="kpi-title">Áridos Vendidos (m³)</div>
          <div class="kpi-value">3,872</div>
          <div class="kpi-change">
            <i class="fas fa-arrow-up"></i> 8% vs. mes anterior
          </div>
        </div>

        <div class="kpi-card">
          <div class="kpi-title">Facturación Total ($)</div>
          <div class="kpi-value">125,450</div>
          <div class="kpi-change">
            <i class="fas fa-arrow-up"></i> 15% vs. mes anterior
          </div>
        </div>

        <div class="kpi-card">
          <div class="kpi-title">Cobros Pendientes ($)</div>
          <div class="kpi-value">35,280</div>
          <div class="kpi-change negative">
            <i class="fas fa-arrow-up"></i> 5% vs. mes anterior
          </div>
        </div>

        <div class="kpi-card">
          <div class="kpi-title">Utilización Maquinaria</div>
          <div class="kpi-value">78%</div>
          <div class="kpi-change">
            <i class="fas fa-arrow-up"></i> 3% vs. mes anterior
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="filter-container">
        <select class="filter-select">
          <option>Este Mes</option>
          <option>Este Trimestre</option>
          <option>Este Año</option>
          <option>Personalizado</option>
        </select>

        <select class="filter-select">
          <option>Todos los Clientes</option>
          <option>Constructora XYZ</option>
          <option>Ayuntamiento</option>
          <option>Particulares</option>
        </select>

        <select class="filter-select">
          <option>Todas las Máquinas</option>
          <option>Excavadoras</option>
          <option>Retroexcavadoras</option>
          <option>Camiones</option>
        </select>

        <select class="filter-select">
          <option>Todos los Áridos</option>
          <option>Arena</option>
          <option>Grava</option>
          <option>Zahorra</option>
        </select>
      </div>

      <!-- Main Dashboard Grid -->
      <div class="dashboard-grid">
        <!-- Left Column - Main Sections -->
        <div class="main-section">
          <!-- Machinery Control Section -->
          <div class="card">
            <div class="card-header">
              <div class="card-title">Control de Maquinaria</div>
              <div class="card-actions">
                <button class="btn btn-warning"><i class="fas fa-tools"></i> Mantenimiento</button>
                <a href="#" class="view-all">Ver todo</a>
              </div>
            </div>
            <div class="card-body">
              <div id="map" class="map-container"></div>
              <div class="machine-list">
                <div class="machine-item">
                  <div class="machine-status status-active"></div>
                  <div class="machine-info">
                    <div class="machine-name">Excavadora CAT 320</div>
                    <div class="machine-details">Obra Autopista Norte - Operador: Carlos Pérez</div>
                  </div>
                  <div class="machine-hours">8,245 h</div>
                </div>
                <div class="machine-item">
                  <div class="machine-status status-maintenance"></div>
                  <div class="machine-info">
                    <div class="machine-name">Retroexcavadora JCB 3CX</div>
                    <div class="machine-details">En mantenimiento - Taller Central</div>
                  </div>
                  <div class="machine-hours">5,123 h</div>
                </div>
                <div class="machine-item">
                  <div class="machine-status status-active"></div>
                  <div class="machine-info">
                    <div class="machine-name>Camión Volquete Volvo FM</div>
                                          <div class=" machine-details">Transporte Áridos - Operador: Miguel Sánchez
                    </div>
                  </div>
                  <div class="machine-hours">12,867 h</div>
                </div>
                <div class="machine-item">
                  <div class="machine-status status-inactive"></div>
                  <div class="machine-info">
                    <div class="machine-name">Bulldozer Komatsu D65</div>
                    <div class="machine-details">Inactivo - Base central</div>
                  </div>
                  <div class="machine-hours">3,578 h</div>
                </div>
                <div class="machine-item">
                  <div class="machine-status status-error"></div>
                  <div class="machine-info">
                    <div class="machine-name">Compactadora CAT CS11</div>
                    <div class="machine-details">Averiada - Pendiente revisión</div>
                  </div>
                  <div class="machine-hours">2,145 h</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Áridos Management Section -->
          <div class="card">
            <div class="card-header">
              <div class="card-title">Gestión de Áridos</div>
              <div class="card-actions">
                <a href="#" class="view-all">Ver todo</a>
              </div>
            </div>
            <div class="card-body">
              <div class="inventory-container">
                <div class="inventory-item">
                  <div class="inventory-info">
                    <div class="inventory-name">Arena Fina</div>
                    <div class="inventory-value">1,250 m³ / 2,000 m³</div>
                  </div>
                  <div class="inventory-bar">
                    <div class="inventory-fill" style="width: 62.5%;"></div>
                  </div>
                </div>
                <div class="inventory-item">
                  <div class="inventory-info">
                    <div class="inventory-name">Grava 20-40mm</div>
                    <div class="inventory-value">350 m³ / 1,500 m³</div>
                  </div>
                  <div class="inventory-bar">
                    <div class="inventory-fill inventory-low" style="width: 23.3%;"></div>
                  </div>
                </div>
                <div class="inventory-item">
                  <div class="inventory-info">
                    <div class="inventory-name">Zahorra Artificial</div>
                    <div class="inventory-value">3,200 m³ / 4,000 m³</div>
                  </div>
                  <div class="inventory-bar">
                    <div class="inventory-fill" style="width: 80%;"></div>
                  </div>
                </div>
                <div class="inventory-item">
                  <div class="inventory-info">
                    <div class="inventory-name">Piedra Triturada</div>
                    <div class="inventory-value">120 m³ / 800 m³</div>
                  </div>
                  <div class="inventory-bar">
                    <div class="inventory-fill inventory-critical" style="width: 15%;"></div>
                  </div>
                </div>
                <div class="inventory-item">
                  <div class="inventory-info">
                    <div class="inventory-name">Arena Gruesa</div>
                    <div class="inventory-value">750 m³ / 1,200 m³</div>
                  </div>
                  <div class="inventory-bar">
                    <div class="inventory-fill" style="width: 62.5%;"></div>
                  </div>
                </div>
              </div>

              <div class="chart-container">
                <canvas id="aridosChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Financial Control Section -->
          <div class="card">
            <div class="card-header">
              <div class="card-title">Control Financiero</div>
              <div class="card-actions">
                <a href="#" class="view-all">Ver todo</a>
              </div>
            </div>
            <div class="card-body">
              <div class="chart-container">
                <canvas id="financialChart"></canvas>
              </div>

              <div class="invoice-list">
                <h4 style="margin: 15px 0 10px;">Facturas Pendientes</h4>
                <div class="invoice-item">
                  <div class="invoice-info">
                    <div class="invoice-id">Factura #2025-042</div>
                    <div class="invoice-client">Constructora Pérez S.L.</div>
                  </div>
                  <div class="invoice-details">
                    <div class="invoice-amount">€12,450</div>
                    <div class="invoice-date invoice-overdue">Vence: 05/04/2025</div>
                  </div>
                </div>
                <div class="invoice-item">
                  <div class="invoice-info">
                    <div class="invoice-id">Factura #2025-038</div>
                    <div class="invoice-client">Ayuntamiento de Villareal</div>
                  </div>
                  <div class="invoice-details">
                    <div class="invoice-amount">$8,275</div>
                    <div class="invoice-date">Vence: 18/04/2025</div>
                  </div>
                </div>
                <div class="invoice-item">
                  <div class="invoice-info">
                    <div class="invoice-id">Factura #2025-036</div>
                    <div class="invoice-client">Inmobiliaria Costa Sol</div>
                  </div>
                  <div class="invoice-details">
                    <div class="invoice-amount">$5,890</div>
                    <div class="invoice-date">Vence: 25/04/2025</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column - Side Sections -->
        <div class="side-section">
          <!-- Active Projects -->
          <div class="card">
            <div class="card-header">
              <div class="card-title">Proyectos Activos</div>
              <div class="card-actions">
                <a href="#" class="view-all">Ver todo</a>
              </div>
            </div>
            <div class="card-body">
              <div class="project-list">
                <div class="project-card">
                  <div class="project-header">
                    <div class="project-title">Ampliación Carretera A-92</div>
                    <div class="project-status status-progress">En progreso</div>
                  </div>
                  <div class="project-content">
                    Constructora Pérez S.L. - Tramo Norte, Km 32-45
                  </div>
                  <div class="project-footer">
                    <div class="project-machines">
                      <div class="machine-badge">E1</div>
                      <div class="machine-badge">R2</div>
                      <div class="machine-badge">C3</div>
                    </div>
                    <div class="project-date">Fin: 30/06/2025</div>
                  </div>
                </div>
                <div class="project-card">
                  <div class="project-header">
                    <div class="project-title">Urbanización Los Pinos</div>
                    <div class="project-status status-progress">En progreso</div>
                  </div>
                  <div class="project-content">
                    Inmobiliaria Costa Sol - Fase 2, Cimentación
                  </div>
                  <div class="project-footer">
                    <div class="project-machines">
                      <div class="machine-badge">E3</div>
                      <div class="machine-badge">B1</div>
                    </div>
                    <div class="project-date">Fin: 15/05/2025</div>
                  </div>
                </div>
                <div class="project-card">
                  <div class="project-header">
                    <div class="project-title">Renovación Plaza Mayor</div>
                    <div class="project-status status-progress">En progreso</div>
                  </div>
                  <div class="project-content">
                    Ayuntamiento de Villareal - Centro urbano
                  </div>
                  <div class="project-footer">
                    <div class="project-machines">
                      <div class="machine-badge">E2</div>
                      <div class="machine-badge">C5</div>
                    </div>
                    <div class="project-date">Fin: 22/05/2025</div>
                  </div>
                </div>
                <div class="project-card">
                  <div class="project-header">
                    <div class="project-title">Cantera Piedra Azul</div>
                    <div class="project-status status-progress">En progreso</div>
                  </div>
                  <div class="project-content">
                    Extracción y proceso - Zona Sur
                  </div>
                  <div class="project-footer">
                    <div class="project-machines">
                      <div class="machine-badge">E5</div>
                      <div class="machine-badge">C8</div>
                    </div>
                    <div class="project-date">Continuo</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Calendar Events -->
          <div class="card">
            <div class="card-header">
              <div class="card-title">Calendario de Eventos</div>
              <div class="card-actions">
                <a href="#" class="view-all">Ver todo</a>
              </div>
            </div>
            <div class="card-body">
              <div class="calendar-events">
                <div class="calendar-event">
                  <div class="event-date">
                    <div class="event-day">12</div>
                    <div class="event-month">ABR</div>
                  </div>
                  <div class="event-content">
                    <div class="event-title">Mantenimiento Excavadora CAT 320</div>
                    <div class="event-details">Taller central - 09:00 AM</div>
                  </div>
                </div>
                <div class="calendar-event">
                  <div class="event-date">
                    <div class="event-day">15</div>
                    <div class="event-month">ABR</div>
                  </div>
                  <div class="event-content">
                    <div class="event-title">Entrega Áridos - Urbanización Los Pinos</div>
                    <div class="event-details">2 camiones - 500m³ de arena gruesa</div>
                  </div>
                </div>
                <div class="calendar-event">
                  <div class="event-date">
                    <div class="event-day">18</div>
                    <div class="event-month">ABR</div>
                  </div>
                  <div class="event-content">
                    <div class="event-title">Vencimiento Factura #2025-038</div>
                    <div class="event-details">Ayuntamiento de Villareal - €8,275</div>
                  </div>
                </div>
                <div class="calendar-event">
                  <div class="event-date">
                    <div class="event-day">22</div>
                    <div class="event-month">ABR</div>
                  </div>
                  <div class="event-content">
                    <div class="event-title">Inspección Técnica Bulldozer Komatsu</div>
                    <div class="event-details">Servicio oficial - 10:30 AM</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Notifications -->
          <div class="card">
            <div class="card-header">
              <div class="card-title">Notificaciones y Alertas</div>
              <div class="card-actions">
                <a href="#" class="view-all">Ver todo</a>
              </div>
            </div>
            <div class="card-body">
              <div class="notifications-list">
                <div class="calendar-event">
                  <div style="margin-right: 15px; color: var(--danger);">
                    <i class="fas fa-exclamation-circle fa-2x"></i>
                  </div>
                  <div class="event-content">
                    <div class="event-title text-danger">Nivel crítico de stock: Piedra Triturada</div>
                    <div class="event-details">Sólo quedan 120m³ (15% de capacidad)</div>
                  </div>
                </div>
                <div class="calendar-event">
                  <div style="margin-right: 15px; color: var(--warning);">
                    <i class="fas fa-tools fa-2x"></i>
                  </div>
                  <div class="event-content">
                    <div class="event-title text-warning">Mantenimiento requerido: Camión Volvo FM</div>
                    <div class="event-details">En 50 horas se cumple ciclo de mantenimiento</div>
                  </div>
                </div>
                <div class="calendar-event">
                  <div style="margin-right: 15px; color: var(--danger);">
                    <i class="fas fa-file-invoice-dollar fa-2x"></i>
                  </div>
                  <div class="event-content">
                    <div class="event-title text-danger">Factura vencida: #2025-042</div>
                    <div class="event-details">Constructora Pérez S.L. - €12,450</div>
                  </div>
                </div>
                <div class="calendar-event">
                  <div style="margin-right: 15px; color: var(--info);">
                    <i class="fas fa-info-circle fa-2x"></i>
                  </div>
                  <div class="event-content">
                    <div class="event-title text-info">Proyecto completo: Canalización Río Sur</div>
                    <div class="event-details">Completado con éxito hoy</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Weather Widget -->
          <div class="card">
            <div class="card-header">
              <div class="card-title">Previsión Meteorológica</div>
            </div>
            <div class="card-body">
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <div style="font-size: 28px; font-weight: 600;">22°C</div>
                  <div style="color: var(--secondary);">Parcialmente nublado</div>
                  <div style="color: var(--secondary);">Villareal, España</div>
                </div>
                <div style="font-size: 40px; color: var(--warning);">
                  <i class="fas fa-cloud-sun"></i>
                </div>
              </div>
              <div style="display: flex; justify-content: space-between; margin-top: 20px;">
                <div style="text-align: center;">
                  <div>Mañana</div>
                  <div style="font-size: 20px; margin: 5px 0;"><i class="fas fa-sun" style="color: var(--warning);"></i>
                  </div>
                  <div>24°C</div>
                </div>
                <div style="text-align: center;">
                  <div>Jueves</div>
                  <div style="font-size: 20px; margin: 5px 0;"><i class="fas fa-cloud"
                      style="color: var(--secondary);"></i></div>
                  <div>20°C</div>
                </div>
                <div style="text-align: center;">
                  <div>Viernes</div>
                  <div style="font-size: 20px; margin: 5px 0;"><i class="fas fa-cloud-rain"
                      style="color: var(--primary);"></i></div>
                  <div>18°C</div>
                </div>
                <div style="text-align: center;">
                  <div>Sábado</div>
                  <div style="font-size: 20px; margin: 5px 0;"><i class="fas fa-cloud-sun"
                      style="color: var(--warning);"></i></div>
                  <div>21°C</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    // Toggle dark/light mode
    document.getElementById('theme-toggle').addEventListener('click', function () {
      document.body.classList.toggle('dark-mode');
      const icon = this.querySelector('i');
      if (document.body.classList.contains('dark-mode')) {
        icon.classList.remove('fa-moon');
        icon.classList.add('fa-sun');
      } else {
        icon.classList.remove('fa-sun');
        icon.classList.add('fa-moon');
      }
    });
    // Initialize Map
    document.addEventListener('DOMContentLoaded', function () {
      // Initialize map if Leaflet is loaded
      if (typeof L !== 'undefined') {
        const map = L.map('map').setView([40.463667, -3.74922], 8);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 19,
          attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // Add machine markers
        const machines = [
          { name: "Excavadora CAT 320", lat: 40.463667, lng: -3.70922, status: "active" },
          { name: "Retroexcavadora JCB 3CX", lat: 40.413667, lng: -3.78922, status: "maintenance" },
          { name: "Camión Volquete Volvo FM", lat: 40.493667, lng: -3.72922, status: "active" },
          { name: "Bulldozer Komatsu D65", lat: 40.444667, lng: -3.76922, status: "inactive" },
          { name: "Compactadora CAT CS11", lat: 40.433667, lng: -3.73922, status: "error" }
        ];

        machines.forEach(machine => {
          let markerColor;
          switch (machine.status) {
            case "active": markerColor = "#28a745"; break;
            case "maintenance": markerColor = "#ffc107"; break;
            case "inactive": markerColor = "#adb5bd"; break;
            case "error": markerColor = "#dc3545"; break;
            default: markerColor = "#1e88e5";
          }

          const marker = L.circleMarker([machine.lat, machine.lng], {
            radius: 8,
            fillColor: markerColor,
            color: "#fff",
            weight: 2,
            opacity: 1,
            fillOpacity: 0.8
          }).addTo(map);

          marker.bindPopup(`<b>${machine.name}</b><br>Estado: ${machine.status}`);
        });
      }

      // Initialize Charts if Chart.js is loaded
      if (typeof Chart !== 'undefined') {
        // Áridos Sales Chart
        const aridosCtx = document.getElementById('aridosChart').getContext('2d');
        new Chart(aridosCtx, {
          type: 'bar',
          data: {
            labels: ['Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb', 'Dom'],
            datasets: [
              {
                label: 'Arena Fina',
                data: [120, 85, 95, 110, 130, 60, 0],
                backgroundColor: '#1e88e5'
              },
              {
                label: 'Grava',
                data: [80, 65, 70, 90, 85, 40, 0],
                backgroundColor: '#ffc107'
              },
              {
                label: 'Zahorra',
                data: [150, 120, 130, 145, 160, 90, 0],
                backgroundColor: '#28a745'
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              title: {
                display: true,
                text: 'Ventas diarias de áridos (m³)'
              },
              legend: {
                position: 'bottom'
              }
            }
          }
        });

        // Financial Chart
        const financialCtx = document.getElementById('financialChart').getContext('2d');
        new Chart(financialCtx, {
          type: 'line',
          data: {
            labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
            datasets: [
              {
                label: 'Facturado',
                data: [95000, 102000, 115000, 125450, 0, 0, 0, 0, 0, 0, 0, 0],
                borderColor: '#1e88e5',
                backgroundColor: 'rgba(30,136,229,0.1)',
                fill: true
              },
              {
                label: 'Cobrado',
                data: [92000, 97000, 105000, 90170, 0, 0, 0, 0, 0, 0, 0, 0],
                borderColor: '#28a745',
                backgroundColor: 'rgba(40,167,69,0.1)',
                fill: true
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              title: {
                display: true,
                text: 'Balance de Facturación 2025 (€)'
              },
              legend: {
                position: 'bottom'
              }
            }
          }
        });
      }
    });
  </script>
</body>

</html>
